<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stylees.css">
    <title>Lista de Proyectos Colaborativos</title>
    <link rel="icon" href="logo (1).ico">
</head>
<body>
    <div class="container">
        <header style="display: flex; justify-content: space-between; align-items: center;">
            <a class="btn" href="index.html">Regresar</a>
            <h1 style="flex-grow: 1; text-align: center;">Lista de Proyectos</h1>
            <a class="btn" href="project-detalles.html">Continuar</a>
        </header>
        <input type="text" id="search" placeholder="Buscar proyectos..." onkeyup="filterProjects()">
        <table id="projectsTable">
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Descripción</th>
                    <th>Estado</th>
                    <th>Responsables</th>
                    <th>Fechas</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="projectsBody">
                <!-- Los proyectos se agregarán aquí dinámicamente -->
            </tbody>
        </table>
    </div>
    <script> src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadProjects();
        });

        function loadProjects() {
            const projects = getProjects();
            const projectsBody = document.getElementById('projectsBody');

            projects.forEach(project => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${project.title}</td>
                    <td>${project.description}</td>
                    <td><span class="status ${project.status}">${project.status === 'ongoing' ? 'En curso' : 'Planificado'}</span></td>
                    <td>${project.responsible}</td>
                    <td>${new Date(project.startDate).toLocaleDateString()} - ${new Date (project.endDate).toLocaleDateString()}</td>
                    <td>
                        <button onclick="editProject(this)">Editar</button>
                        <button onclick="deleteProject(this)">Eliminar</button>
                    </td>
                `;
                projectsBody.appendChild(row);
            });
        }

        function getProjects() {
            const projects = localStorage.getItem('projects');
            return projects ? JSON.parse(projects) : [];
        }

        function filterProjects() {
            const filter = document.getElementById("search").value.toUpperCase();
            const table = document.getElementById("projectsTable");
            const tr = table.getElementsByTagName("tr");
            for (let i = 1; i < tr.length; i++) {
                const td = tr[i].getElementsByTagName("td")[0]; // Filtrar solo por título
                if (td) {
                    const txtValue = td.textContent || td.innerText;
                    tr[i].style.display = txtValue.toUpperCase().indexOf(filter) > -1 ? "" : "none";
                }
            }
        }
    </script>
    <script src="script.js"></script>

</body>
</html>